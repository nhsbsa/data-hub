{"version":3,"file":"file-upload.js","names":["MOJFrontend","dragAndDropSupported","formDataSupported","fileApiSupported","MultiFileUpload","params","defaultParams","uploadFileEntryHook","$","noop","uploadFileExitHook","uploadFileErrorHook","fileDeleteHook","uploadStatusText","dropzoneHintText","dropzoneButtonText","extend","container","addClass","feedbackContainer","find","setupFileInput","setupDropzone","setupLabel","setupStatusBox","on","proxy","prototype","fileInput","wrap","dropzone","label","id","append","status","onDragOver","e","preventDefault","onDragLeave","removeClass","onDrop","html","uploadFiles","originalEvent","dataTransfer","files","i","length","uploadFile","onFileChange","currentTarget","replaceWith","val","clone","focus","onFileFocus","onFileBlur","getSuccessHtml","success","messageHtml","getErrorHtml","error","message","getFileRowHtml","file","name","getDeleteButtonHtml","filename","originalname","formData","FormData","item","ajax","url","uploadUrl","type","data","processData","contentType","response","messageText","jqXHR","textStatus","errorThrown","xhr","XMLHttpRequest","upload","addEventListener","lengthComputable","percentComplete","loaded","total","parseInt","text","onFileDeleteClick","button","value","deleteUrl","dataType","parents","remove"],"sources":["file-upload.js"],"sourcesContent":["if(MOJFrontend.dragAndDropSupported() && MOJFrontend.formDataSupported() && MOJFrontend.fileApiSupported()) {\n    MOJFrontend.MultiFileUpload = function(params) {\n      this.defaultParams = {\n        uploadFileEntryHook: $.noop,\n        uploadFileExitHook: $.noop,\n        uploadFileErrorHook: $.noop,\n        fileDeleteHook: $.noop,\n        uploadStatusText: 'Uploading files, please wait',\n        dropzoneHintText: 'Drag and drop files here or',\n        dropzoneButtonText: 'Choose files'\n      };\n   \n      this.params = $.extend({}, this.defaultParams, params);\n   \n      this.params.container.addClass('moj-multi-file-upload--enhanced');\n   \n      this.feedbackContainer = this.params.container.find('.moj-multi-file__uploaded-files');\n      this.setupFileInput();\n      this.setupDropzone();\n      this.setupLabel();\n      this.setupStatusBox();\n      this.params.container.on('click', '.moj-multi-file-upload__delete', $.proxy(this, 'onFileDeleteClick'));\n    };\n   \n    MOJFrontend.MultiFileUpload.prototype.setupDropzone = function() {\n      this.fileInput.wrap('<div class=\"moj-multi-file-upload__dropzone\" />');\n      this.dropzone = this.params.container.find('.moj-multi-file-upload__dropzone');\n      this.dropzone.on('dragover', $.proxy(this, 'onDragOver'));\n      this.dropzone.on('dragleave', $.proxy(this, 'onDragLeave'));\n      this.dropzone.on('drop', $.proxy(this, 'onDrop'));\n    };\n   \n    MOJFrontend.MultiFileUpload.prototype.setupLabel = function() {\n      this.label = $('<label for=\"'+this.fileInput[0].id+'\" class=\"govuk-button govuk-button--secondary\">'+ this.params.dropzoneButtonText +'</label>');\n      this.dropzone.append('<p class=\"govuk-body\">' + this.params.dropzoneHintText + '</p>');\n      this.dropzone.append(this.label);\n    };\n   \n    MOJFrontend.MultiFileUpload.prototype.setupFileInput = function() {\n      this.fileInput = this.params.container.find('.moj-multi-file-upload__input');\n      this.fileInput.on('change', $.proxy(this, 'onFileChange'));\n      this.fileInput.on('focus', $.proxy(this, 'onFileFocus'));\n      this.fileInput.on('blur', $.proxy(this, 'onFileBlur'));\n    };\n   \n    MOJFrontend.MultiFileUpload.prototype.setupStatusBox = function() {\n      this.status = $('<div aria-live=\"polite\" role=\"status\" class=\"govuk-visually-hidden\" />');\n      this.dropzone.append(this.status);\n    };\n   \n    MOJFrontend.MultiFileUpload.prototype.onDragOver = function(e) {\n      e.preventDefault();\n      this.dropzone.addClass('moj-multi-file-upload--dragover');\n    };\n   \n    MOJFrontend.MultiFileUpload.prototype.onDragLeave = function() {\n      this.dropzone.removeClass('moj-multi-file-upload--dragover');\n    };\n   \n    MOJFrontend.MultiFileUpload.prototype.onDrop = function(e) {\n      e.preventDefault();\n      this.dropzone.removeClass('moj-multi-file-upload--dragover');\n      this.feedbackContainer.removeClass('moj-hidden');\n      this.status.html(this.params.uploadStatusText);\n      this.uploadFiles(e.originalEvent.dataTransfer.files);\n    };\n   \n    MOJFrontend.MultiFileUpload.prototype.uploadFiles = function(files) {\n      for(var i = 0; i < files.length; i++) {\n        this.uploadFile(files[i]);\n      }\n    };\n   \n    MOJFrontend.MultiFileUpload.prototype.onFileChange = function(e) {\n      this.feedbackContainer.removeClass('moj-hidden');\n      this.status.html(this.params.uploadStatusText);\n      this.uploadFiles(e.currentTarget.files);\n      this.fileInput.replaceWith($(e.currentTarget).val('').clone(true));\n      this.setupFileInput();\n      this.fileInput.focus();\n    };\n   \n    MOJFrontend.MultiFileUpload.prototype.onFileFocus = function(e) {\n      this.label.addClass('moj-multi-file-upload--focused');\n    };\n   \n    MOJFrontend.MultiFileUpload.prototype.onFileBlur = function(e) {\n      this.label.removeClass('moj-multi-file-upload--focused');\n    };\n   \n    MOJFrontend.MultiFileUpload.prototype.getSuccessHtml = function(success) {\n      return '<span class=\"moj-multi-file-upload__success\"> <svg class=\"moj-banner__icon\" fill=\"currentColor\" role=\"presentation\" focusable=\"false\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 25 25\" height=\"25\" width=\"25\"><path d=\"M25,6.2L8.7,23.2L0,14.1l4-4.2l4.7,4.9L21,2L25,6.2z\"/></svg> ' + success.messageHtml + '</span>';\n    };\n   \n    MOJFrontend.MultiFileUpload.prototype.getErrorHtml = function(error) {\n      return '<span class=\"moj-multi-file-upload__error\"> <svg class=\"moj-banner__icon\" fill=\"currentColor\" role=\"presentation\" focusable=\"false\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 25 25\" height=\"25\" width=\"25\"><path d=\"M13.6,15.4h-2.3v-4.5h2.3V15.4z M13.6,19.8h-2.3v-2.2h2.3V19.8z M0,23.2h25L12.5,2L0,23.2z\"/></svg> '+ error.message +'</span>';\n    };\n   \n    MOJFrontend.MultiFileUpload.prototype.getFileRowHtml = function(file) {\n      var html = '';\n      html += '<div class=\"govuk-summary-list__row moj-multi-file-upload__row\">';\n      html += '  <div class=\"govuk-summary-list__value moj-multi-file-upload__message\">';\n      html +=       '<span class=\"moj-multi-file-upload__filename\">'+file.name+'</span>';\n      html +=       '<span class=\"moj-multi-file-upload__progress\">0%</span>';\n      html += '  </div>';\n      html += '  <div class=\"govuk-summary-list__actions moj-multi-file-upload__actions\"></div>';\n      html += '</div>';\n      return html;\n    };\n   \n    MOJFrontend.MultiFileUpload.prototype.getDeleteButtonHtml = function(file) {\n      var html = '<button class=\"moj-multi-file-upload__delete govuk-button govuk-button--secondary govuk-!-margin-bottom-0\" type=\"button\" name=\"delete\" value=\"' + file.filename + '\">';\n      html += 'Delete <span class=\"govuk-visually-hidden\">' + file.originalname + '</span>';\n      html += '</button>';\n      return html;\n    };\n   \n    MOJFrontend.MultiFileUpload.prototype.uploadFile = function(file) {\n      this.params.uploadFileEntryHook(this, file);\n      var formData = new FormData();\n      formData.append('documents', file);\n      var item = $(this.getFileRowHtml(file));\n      this.feedbackContainer.find('.moj-multi-file-upload__list').append(item);\n   \n      $.ajax({\n        url: this.params.uploadUrl,\n        type: 'post',\n        data: formData,\n        processData: false,\n        contentType: false,\n        success: $.proxy(function(response){\n          if(response.error) {\n            item.find('.moj-multi-file-upload__message').html(this.getErrorHtml(response.error));\n            this.status.html(response.error.message);\n          } else {\n            item.find('.moj-multi-file-upload__message').html(this.getSuccessHtml(response.success));\n            this.status.html(response.success.messageText);\n          }\n          item.find('.moj-multi-file-upload__actions').append(this.getDeleteButtonHtml(response.file));\n          this.params.uploadFileExitHook(this, file, response);\n        }, this),\n        error: $.proxy(function(jqXHR, textStatus, errorThrown) {\n          this.params.uploadFileErrorHook(this, file, jqXHR, textStatus, errorThrown);\n        }, this),\n        xhr: function() {\n          var xhr = new XMLHttpRequest();\n          xhr.upload.addEventListener('progress', function(e) {\n            if (e.lengthComputable) {\n              var percentComplete = e.loaded / e.total;\n              percentComplete = parseInt(percentComplete * 100, 10);\n              item.find('.moj-multi-file-upload__progress').text(' ' + percentComplete + '%');\n            }\n          }, false);\n          return xhr;\n        }\n      });\n    };\n   \n    MOJFrontend.MultiFileUpload.prototype.onFileDeleteClick = function(e) {\n      e.preventDefault(); // if user refreshes page and then deletes\n      var button = $(e.currentTarget);\n      var data = {};\n      data[button[0].name] = button[0].value;\n      $.ajax({\n        url: this.params.deleteUrl,\n        type: 'post',\n        dataType: 'json',\n        data: data,\n        success: $.proxy(function(response){\n          if(response.error) {\n            // handle error\n          } else {\n            button.parents('.moj-multi-file-upload__row').remove();\n            if(this.feedbackContainer.find('.moj-multi-file-upload__row').length === 0) {\n              this.feedbackContainer.addClass('moj-hidden');\n            }\n          }\n          this.params.fileDeleteHook(this, response);\n        }, this)\n      });\n    };\n  }"],"mappings":"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","ignoreList":[]}