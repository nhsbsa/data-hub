<!-- Use this page as the index for your project -->

<!-- ADDING CUSTOM CSS - Add your custom CSS or Sass in /app/assets/sass/main.scss -->

<!-- Extends the layout from /app/views/layouts/v3/layout.html -->
{% extends 'layouts/v5/layout.html' %}

<!-- Set the prototype version folder number here for links to work correctly in the header (layout.html) -->
{% set prototypeVersion = 'v5' %}

<!-- Conditions to decide which cards to show which content -->
{% if data.userType == 'epact' %}
    {% set productHeading = 'Electronic prescribing analysis and cost tool (ePACT2)' %}
    {% set productURL = '../data-products/epact/epact-loggedin' %}
    {% set pendingHeading = 'Electronic dental (eDEN)' %}
    {% set expiredHeading = 'Electronic ophthalmics (eOPS)' %}
{% elif data.userType == 'eden' %}
    {% set productHeading = 'Electronic dental (eDEN)' %}
    {% set productURL = '../data-products/eden/eden-wales-loggedin' %}
    {% set pendingHeading = 'Electronic prescribing analysis and cost tool (ePACT2)' %}
    {% set expiredHeading = 'Electronic ophthalmics (eOPS)' %}
{% elif data.userType == 'edenWelsh' %}
    {% set productHeading = 'Electronic dental (eDEN)' %}
    {% set productURL = '../data-products/eden/eden-wales-loggedin' %}
    {% set pendingHeading = 'Electronic prescribing analysis and cost tool (ePACT2)' %}
    {% set expiredHeading = 'Electronic ophthalmics (eOPS)' %}
{% elif data.userType == 'eops' %}
    {% set productHeading = 'Electronic ophthalmics (eOPS)' %}
    {% set productURL = '../data-products/eops/eops-loggedin' %}
    {% set pendingHeading = 'Electronic dental (eDEN)' %}
    {% set expiredHeading = 'Electronic prescribing analysis and cost tool (ePACT2)' %}
{% elif data.userType == 'mod' %}
    {% set productHeading = 'Ministry of Defence (MOD)' %}
    {% set productURL = '../data-products/epact/ministry-of-defence/mod-loggedin' %}
{% elif data.userType == 'hot' %}
    {% set productHeading = 'Electronic prescribing analysis and cost tool (ePACT2)' %}
    {% set productURL = '../data-products/epact/epact-loggedin' %}
{% else %}
    {% set productHeading = 'Electronic prescribing analysis and cost tool (ePACT2)' %}
    {% set productURL = '../data-products/epact/epact-loggedin' %}
    {% set pendingHeading = 'Electronic dental (eDEN)' %}
    {% set expiredHeading = 'Electronic ophthalmics (eOPS)' %}
{% endif %}

<!-- Set the page title -->
{% block pageTitle %}
My account - {{ serviceName }} - NHSBSA
{% endblock %}

{% block beforeContent %}
{{ breadcrumb({
items: [
{
href: "/data-hub/mvp/v5/homepage",
text: "Home"
}
]
}) }}
{% endblock %}

{% block content %}
<div class="nhsuk-grid-row">
        <div class="nhsuk-grid-column-full">
        <h1 class="nhsuk-heading-l">My account</h1>
        <h2 class="nhsuk-heading-m">Current access</h2>
        {% if not data.userType %}
            <p>You have not requested access to any data products</p>
            <p>View our data products to request access:</p>
            <ul class="nhsuk-list">
                <li><a href="../data-products/epact/epact">Electronic prescribing analysis and cost tool (ePACT2)</a></li>
                <li><a href="../data-products/eden/eden">Electronic dental (eDEN)</a></li>
                <li><a href="../data-products/eops/eops">Electronic ophthalmics (eOPS)</a></li>
            </ul>
            <p>You can access our Public data <a href="../data-products/public-available-data/index">prescribing and dispensing data</a>.</p>
            <hr>
        {% elif data.userType == 'admin' %}
            <h3 class="nhsuk-heading-s">Prescribing and dispensing</h3>
            <ul class="nhsuk-list">
                <li><a href="../data-products/epact/epact-loggedin">Electronic prescribing analysis and cost tool (ePACT2)</a></li>
                <li><a href="../data-products/epact/ministry-of-defence/mod-loggedin">Ministry of Defence (MOD)</a></li>
                <li><a href="../data-products/public-available-data/index">Public data</a></li>
            </ul>
            <h3 class="nhsuk-heading-s">Dental</h3>
            <ul class="nhsuk-list">
                <li><a href="../data-products/eden/eden-loggedin">Electronic dental (eDEN)</a></li>                
            </ul>
            <h3 class="nhsuk-heading-s">Ophthalmic</h3>
            <ul class="nhsuk-list">
                <li><a href="../data-products/eops/eops-loggedin">Electronic ophthalmic (eOPS)</a></li>
            </ul>
            <hr>
        {% else %}            
            <ul class="nhsuk-grid-row nhsuk-card-group">
                <li class="nhsuk-grid-column-one-half nhsuk-card-group__item">
                    {{ card({
                        href: productURL,                        
                        heading: productHeading,
                        headingClasses: "nhsuk-heading-m",
                        descriptionHtml: "<p class=\"nhsuk-card__description\">Access status: <strong class=\"nhsuk-tag nhsuk-tag--green\">Active</strong></p>
                        <p class=\"nhsuk-card__description nhsuk-u-margin-top-3\"><a href=\"#\">Cancel access</a></p></p>"
                    }) }}
                </li>
                {% if data.userType == 'eden' %}
                    <li class="nhsuk-grid-column-one-half nhsuk-card-group__item">
                        {{ card({
                            href: "https://compass.nhsbsa.nhs.uk/auth/esr.elogin",                        
                            heading: "Compass",
                            headingClasses: "nhsuk-heading-m",
                            descriptionHtml: "<p class=\"nhsuk-card__description\">Access status: <strong class=\"nhsuk-tag nhsuk-tag--green\">Public access</strong></p>
                            <p class=\"nhsuk-card__description nhsuk-u-margin-top-3\"><a href=\"#\">Cancel access</a></p></p>"
                        }) }}
                    </li>
                {% endif %}
            </ul>
            {% if data.userType == 'epact' or data.userType == 'eden' or data.userType == 'eops' %}
                {% call details({
                summaryText: "View your pending or expired access"            
                }) %}
                    <h2 class="nhsuk-heading-s">{{ pendingHeading }}</h2>
                    <p>Access status: <strong class="nhsuk-tag nhsuk-tag--yellow">Pending</strong></p>
                    <p class="nhsuk-card__description"><a href="#">Cancel request</a></p></p>
                    <hr>
                    <h2 class="nhsuk-heading-s">{{ expiredHeading }}</h2>
                    <p>Access status: <strong class="nhsuk-tag nhsuk-tag--red">Expired</strong></p>
                    <p class="nhsuk-card__description"><a href="#">Request access</a></p></p>
                {% endcall %}       
            {% endif %}
            <hr>
        {% endif %}
    </div>
    {% if data.userType == 'admin' %}
        <div class="nhsuk-grid-column-full">        
            <h2 class="nhsuk-heading-m">Administration access</h2>
            <ul class="nhsuk-list">
                <li><a href="../admin-view/draft-news">News articles (draft)</a></li>
                <li><a href="../training-hub/admin-view/draft-training">Training (draft)</a></li>
            </ul>
            <hr>
        </div>
    {% endif %}
    <div class="nhsuk-grid-column-full">        
        <h2 class="nhsuk-heading-m">Details</h2>
        <dl class="nhsuk-summary-list nhsuk-summary-list--no-border">
            <div class="nhsuk-summary-list__row">
                <dt class="nhsuk-summary-list__key">
                    Full name
                </dt>
                <dd class="nhsuk-summary-list__value">
                    {% if data['full-name'] %}
                    {{ data['full-name'] }}
                    {% else %}
                    Test Name
                    {% endif %}
                </dd>
            </div>
            <div class="nhsuk-summary-list__row">
                <dt class="nhsuk-summary-list__key">
                    Job role
                </dt>
                <dd class="nhsuk-summary-list__value">
                    {% if data['job-role'] %}
                    {{ data['job-role'] }}
                    {% else %}
                    Senior data analyst
                    {% endif %}
                </dd>
            </div>
            <div class="nhsuk-summary-list__row">
                <dt class="nhsuk-summary-list__key">
                    Organisation
                </dt>
                <dd class="nhsuk-summary-list__value">
                    {% if data['organisation'] %}
                    {{ data['organisation'] }}
                    {% else %}
                    NHS Business Services Authority
                    {% endif %}
                </dd>
            </div>
            <div class="nhsuk-summary-list__row">
                <dt class="nhsuk-summary-list__key">
                    Email address
                </dt>
                <dd class="nhsuk-summary-list__value">
                    {% if data['email-address'] %}
                    {{ data['email-address'] }}
                    {% elif data['username'] %}
                    {{ data['username'] }}
                    {% else %}
                    test.name@nhsbsa.nhs.uk
                    {% endif %}
                </dd>
            </div>
        </dl>
        <p>Email <a href="mailto:dataservicessupport@nhsbsa.nhs.uk">dataservicessuport@nhsbsa.nhs.uk</a> to update your details.</p>
        <hr>
    </div>
</div>
</div>
{% endblock %}